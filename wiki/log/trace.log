2025-08-07 14:21:53.319 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 8.0.2.Final
2025-08-07 14:21:53.347 INFO  com.matt.wiki.WikiApplication                     :53   [32m                  [0;39m Starting WikiApplication using Java 20.0.1 with PID 5729 (/Users/yushuzhan/Documents/GitHub/FullStackPractices/wiki/target/classes started by yushuzhan in /Users/yushuzhan/Documents/GitHub/FullStackPractices/wiki)
2025-08-07 14:21:53.348 INFO  com.matt.wiki.WikiApplication                     :652  [32m                  [0;39m No active profile set, falling back to 1 default profile: "default"
2025-08-07 14:21:53.369 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :252  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-08-07 14:21:53.369 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :252  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-08-07 14:21:53.697 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :294  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode
2025-08-07 14:21:53.698 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :145  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-08-07 14:21:53.717 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :213  [32m                  [0;39m Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2025-08-07 14:21:54.066 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :111  [32m                  [0;39m Tomcat initialized with port 8080 (http)
2025-08-07 14:21:54.072 INFO  org.apache.coyote.http11.Http11NioProtocol        :168  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8080"]
2025-08-07 14:21:54.072 INFO  org.apache.catalina.core.StandardService          :168  [32m                  [0;39m Starting service [Tomcat]
2025-08-07 14:21:54.072 INFO  org.apache.catalina.core.StandardEngine           :168  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-08-07 14:21:54.085 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :168  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2025-08-07 14:21:54.085 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :301  [32m                  [0;39m Root WebApplicationContext: initialization completed in 716 ms
2025-08-07 14:21:54.748 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :59   [32m                  [0;39m LiveReload server is running on port 35729
2025-08-07 14:21:54.763 INFO  org.apache.coyote.http11.Http11NioProtocol        :168  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8080"]
2025-08-07 14:21:54.768 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :243  [32m                  [0;39m Tomcat started on port 8080 (http) with context path '/'
2025-08-07 14:21:54.775 INFO  com.matt.wiki.WikiApplication                     :59   [32m                  [0;39m Started WikiApplication in 1.644 seconds (process running for 2.032)
2025-08-07 14:21:54.776 INFO  com.matt.wiki.WikiApplication                     :168  [32m                  [0;39m Start Successful
2025-08-07 14:21:54.777 INFO  com.matt.wiki.WikiApplication                     :168  [32m                  [0;39m 地址:	http://127.0.0.1:8080
2025-08-07 14:22:00.010 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608515160843358208[0;39m 生成今日电子书快照开始
2025-08-07 14:22:00.023 INFO  com.zaxxer.hikari.HikariDataSource                :109  [32m608515160843358208[0;39m HikariPool-1 - Starting...
2025-08-07 14:22:03.015 INFO  com.zaxxer.hikari.pool.HikariPool                 :575  [32m608515160843358208[0;39m HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@e830db5
2025-08-07 14:22:03.017 INFO  com.zaxxer.hikari.HikariDataSource                :122  [32m608515160843358208[0;39m HikariPool-1 - Start completed.
2025-08-07 14:22:03.027 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608515160843358208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 14:22:03.044 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608515160843358208[0;39m ==> Parameters: 
2025-08-07 14:22:03.489 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608515160843358208[0;39m <==    Updates: 0
2025-08-07 14:22:03.491 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608515160843358208[0;39m 生成今日电子书快照结束，耗时：3480毫秒
2025-08-07 14:22:03.492 INFO  com.matt.wiki.job.DocJob                          :30   [32m608515175447924736[0;39m 更新电子书下的文档数据开始
2025-08-07 14:22:03.493 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608515175447924736[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 14:22:03.493 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608515175447924736[0;39m ==> Parameters: 
2025-08-07 14:22:03.928 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608515175447924736[0;39m <==    Updates: 4
2025-08-07 14:22:03.929 INFO  com.matt.wiki.job.DocJob                          :33   [32m608515175447924736[0;39m 更新电子书下的文档数据结束，耗时：437毫秒
2025-08-07 14:22:05.146 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :168  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-08-07 14:22:05.146 INFO  org.springframework.web.servlet.DispatcherServlet :532  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2025-08-07 14:22:05.148 INFO  org.springframework.web.servlet.DispatcherServlet :554  [32m                  [0;39m Completed initialization in 1 ms
2025-08-07 14:22:05.194 INFO  com.matt.wiki.websocket.WebSocketServer           :32   [32m                  [0;39m 有新连接：token：NurVBxFJ2f，session id：0，当前连接数：1
2025-08-07 14:22:09.522 INFO  com.matt.wiki.websocket.WebSocketServer           :46   [32m                  [0;39m 连接关闭，token：NurVBxFJ2f，session id：0！当前连接数：0
2025-08-07 14:22:09.694 INFO  com.matt.wiki.websocket.WebSocketServer           :32   [32m                  [0;39m 有新连接：token：oYePwGkok4，session id：1，当前连接数：1
2025-08-07 14:22:09.764 INFO  com.matt.wiki.aspect.LogAspect                    :52   [32m608515201750405121[0;39m ------------- 开始 -------------
2025-08-07 14:22:09.764 INFO  com.matt.wiki.aspect.LogAspect                    :52   [32m608515201750405122[0;39m ------------- 开始 -------------
2025-08-07 14:22:09.764 INFO  com.matt.wiki.aspect.LogAspect                    :52   [32m608515201750405120[0;39m ------------- 开始 -------------
2025-08-07 14:22:09.767 INFO  com.matt.wiki.aspect.LogAspect                    :53   [32m608515201750405121[0;39m 请求地址: http://localhost:8080/ebook-snapshot/get-statistic GET
2025-08-07 14:22:09.768 INFO  com.matt.wiki.aspect.LogAspect                    :53   [32m608515201750405122[0;39m 请求地址: http://localhost:8080/ebook-snapshot/get-30-statistic GET
2025-08-07 14:22:09.768 INFO  com.matt.wiki.aspect.LogAspect                    :54   [32m608515201750405121[0;39m 类名方法: com.matt.wiki.controller.EbookSnapshotController.getStatistic
2025-08-07 14:22:09.768 INFO  com.matt.wiki.aspect.LogAspect                    :53   [32m608515201750405120[0;39m 请求地址: http://localhost:8080/category/all GET
2025-08-07 14:22:09.768 INFO  com.matt.wiki.aspect.LogAspect                    :54   [32m608515201750405120[0;39m 类名方法: com.matt.wiki.controller.CategoryController.all
2025-08-07 14:22:09.768 INFO  com.matt.wiki.aspect.LogAspect                    :54   [32m608515201750405122[0;39m 类名方法: com.matt.wiki.controller.EbookSnapshotController.get30Statistic
2025-08-07 14:22:09.768 INFO  com.matt.wiki.aspect.LogAspect                    :55   [32m608515201750405122[0;39m 远程地址: 0:0:0:0:0:0:0:1
2025-08-07 14:22:09.768 INFO  com.matt.wiki.aspect.LogAspect                    :55   [32m608515201750405120[0;39m 远程地址: 0:0:0:0:0:0:0:1
2025-08-07 14:22:09.768 INFO  com.matt.wiki.aspect.LogAspect                    :55   [32m608515201750405121[0;39m 远程地址: 0:0:0:0:0:0:0:1
2025-08-07 14:22:09.788 INFO  com.matt.wiki.aspect.LogAspect                    :77   [32m608515201750405122[0;39m 请求参数: []
2025-08-07 14:22:09.788 INFO  com.matt.wiki.aspect.LogAspect                    :77   [32m608515201750405121[0;39m 请求参数: []
2025-08-07 14:22:09.788 INFO  com.matt.wiki.aspect.LogAspect                    :77   [32m608515201750405120[0;39m 请求参数: []
2025-08-07 14:22:10.183 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.getStatistic :135  [32m608515201750405121[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2025-08-07 14:22:10.183 DEBUG c.matt.wiki.mapper.CategoryMapper.selectByExample :135  [32m608515201750405120[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2025-08-07 14:22:10.183 DEBUG c.m.w.m.EbookSnapshotMapperCust.get30Statistic    :135  [32m608515201750405122[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2025-08-07 14:22:10.184 DEBUG c.m.w.m.EbookSnapshotMapperCust.get30Statistic    :135  [32m608515201750405122[0;39m ==> Parameters: 
2025-08-07 14:22:10.184 DEBUG c.matt.wiki.mapper.CategoryMapper.selectByExample :135  [32m608515201750405120[0;39m ==> Parameters: 
2025-08-07 14:22:10.184 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.getStatistic :135  [32m608515201750405121[0;39m ==> Parameters: 
2025-08-07 14:22:10.610 TRACE c.matt.wiki.mapper.CategoryMapper.selectByExample :141  [32m608515201750405120[0;39m <==    Columns: id, parent, name, sort
2025-08-07 14:22:10.610 TRACE c.m.w.mapper.EbookSnapshotMapperCust.getStatistic :141  [32m608515201750405121[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2025-08-07 14:22:10.610 TRACE c.m.w.m.EbookSnapshotMapperCust.get30Statistic    :141  [32m608515201750405122[0;39m <==    Columns: date, viewIncrease, voteIncrease
2025-08-07 14:22:10.611 TRACE c.matt.wiki.mapper.CategoryMapper.selectByExample :141  [32m608515201750405120[0;39m <==        Row: 607367559204966400, 300, Spring Boot, 1
2025-08-07 14:22:10.611 TRACE c.m.w.m.EbookSnapshotMapperCust.get30Statistic    :141  [32m608515201750405122[0;39m <==        Row: 2025-08-05, 985, 290
2025-08-07 14:22:10.611 TRACE c.m.w.mapper.EbookSnapshotMapperCust.getStatistic :141  [32m608515201750405121[0;39m <==        Row: 2025-08-06, 985, 290, 0, 0
2025-08-07 14:22:10.612 TRACE c.matt.wiki.mapper.CategoryMapper.selectByExample :141  [32m608515201750405120[0;39m <==        Row: 607367368720650240, 100, 前端框架, 1
2025-08-07 14:22:10.612 TRACE c.m.w.m.EbookSnapshotMapperCust.get30Statistic    :141  [32m608515201750405122[0;39m <==        Row: 2025-08-06, 0, 0
2025-08-07 14:22:10.612 TRACE c.m.w.mapper.EbookSnapshotMapperCust.getStatistic :141  [32m608515201750405121[0;39m <==        Row: 2025-08-07, 985, 290, 0, 0
2025-08-07 14:22:10.612 TRACE c.matt.wiki.mapper.CategoryMapper.selectByExample :141  [32m608515201750405120[0;39m <==        Row: 100, 0, 前端开发, 100
2025-08-07 14:22:10.612 DEBUG c.m.w.m.EbookSnapshotMapperCust.get30Statistic    :135  [32m608515201750405122[0;39m <==      Total: 2
2025-08-07 14:22:10.612 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.getStatistic :135  [32m608515201750405121[0;39m <==      Total: 2
2025-08-07 14:22:10.612 TRACE c.matt.wiki.mapper.CategoryMapper.selectByExample :141  [32m608515201750405120[0;39m <==        Row: 101, 100, Vue, 101
2025-08-07 14:22:10.613 TRACE c.matt.wiki.mapper.CategoryMapper.selectByExample :141  [32m608515201750405120[0;39m <==        Row: 102, 100, HTML & CSS, 102
2025-08-07 14:22:10.613 TRACE c.matt.wiki.mapper.CategoryMapper.selectByExample :141  [32m608515201750405120[0;39m <==        Row: 200, 0, Java, 200
2025-08-07 14:22:10.613 TRACE c.matt.wiki.mapper.CategoryMapper.selectByExample :141  [32m608515201750405120[0;39m <==        Row: 201, 200, 基础应用, 201
2025-08-07 14:22:10.613 TRACE c.matt.wiki.mapper.CategoryMapper.selectByExample :141  [32m608515201750405120[0;39m <==        Row: 202, 200, 框架应用, 202
2025-08-07 14:22:10.613 TRACE c.matt.wiki.mapper.CategoryMapper.selectByExample :141  [32m608515201750405120[0;39m <==        Row: 300, 0, 后端开发, 300
2025-08-07 14:22:10.613 TRACE c.matt.wiki.mapper.CategoryMapper.selectByExample :141  [32m608515201750405120[0;39m <==        Row: 301, 300, Node.js, 301
2025-08-07 14:22:10.614 TRACE c.matt.wiki.mapper.CategoryMapper.selectByExample :141  [32m608515201750405120[0;39m <==        Row: 302, 300, Go, 302
2025-08-07 14:22:10.614 TRACE c.matt.wiki.mapper.CategoryMapper.selectByExample :141  [32m608515201750405120[0;39m <==        Row: 400, 0, 数据库, 400
2025-08-07 14:22:10.614 TRACE c.matt.wiki.mapper.CategoryMapper.selectByExample :141  [32m608515201750405120[0;39m <==        Row: 401, 400, MySQL, 401
2025-08-07 14:22:10.614 TRACE c.matt.wiki.mapper.CategoryMapper.selectByExample :141  [32m608515201750405120[0;39m <==        Row: 402, 400, PostgreSQL, 402
2025-08-07 14:22:10.614 TRACE c.matt.wiki.mapper.CategoryMapper.selectByExample :141  [32m608515201750405120[0;39m <==        Row: 500, 0, 运维与部署, 500
2025-08-07 14:22:10.614 TRACE c.matt.wiki.mapper.CategoryMapper.selectByExample :141  [32m608515201750405120[0;39m <==        Row: 501, 500, Docker, 501
2025-08-07 14:22:10.614 TRACE c.matt.wiki.mapper.CategoryMapper.selectByExample :141  [32m608515201750405120[0;39m <==        Row: 502, 500, Kubernetes, 502
2025-08-07 14:22:10.615 TRACE c.matt.wiki.mapper.CategoryMapper.selectByExample :141  [32m608515201750405120[0;39m <==        Row: 503, 500, CI/CD, 503
2025-08-07 14:22:10.615 DEBUG c.matt.wiki.mapper.CategoryMapper.selectByExample :135  [32m608515201750405120[0;39m <==      Total: 18
2025-08-07 14:22:10.631 INFO  com.matt.wiki.aspect.LogAspect                    :90   [32m608515201750405120[0;39m 返回结果: {"content":[{"id":607367559204966400,"name":"Spring Boot","parent":300,"sort":1},{"id":607367368720650240,"name":"前端框架","parent":100,"sort":1},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"后端开发","parent":0,"sort":300},{"id":301,"name":"Node.js","parent":300,"sort":301},{"id":302,"name":"Go","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":402,"name":"PostgreSQL","parent":400,"sort":402},{"id":500,"name":"运维与部署","parent":0,"sort":500},{"id":501,"name":"Docker","parent":500,"sort":501},{"id":502,"name":"Kubernetes","parent":500,"sort":502},{"id":503,"name":"CI/CD","parent":500,"sort":503}],"success":true}
2025-08-07 14:22:10.631 INFO  com.matt.wiki.aspect.LogAspect                    :91   [32m608515201750405120[0;39m ------------- 结束 耗时：868 ms -------------
2025-08-07 14:22:10.632 INFO  com.matt.wiki.aspect.LogAspect                    :90   [32m608515201750405121[0;39m 返回结果: {"content":[{"date":1754402400000,"viewCount":985,"viewIncrease":0,"voteCount":290,"voteIncrease":0},{"date":1754488800000,"viewCount":985,"viewIncrease":0,"voteCount":290,"voteIncrease":0}],"success":true}
2025-08-07 14:22:10.632 INFO  com.matt.wiki.aspect.LogAspect                    :90   [32m608515201750405122[0;39m 返回结果: {"content":[{"date":1754316000000,"viewCount":0,"viewIncrease":985,"voteCount":0,"voteIncrease":290},{"date":1754402400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2025-08-07 14:22:10.632 INFO  com.matt.wiki.aspect.LogAspect                    :91   [32m608515201750405121[0;39m ------------- 结束 耗时：869 ms -------------
2025-08-07 14:22:10.632 INFO  com.matt.wiki.aspect.LogAspect                    :91   [32m608515201750405122[0;39m ------------- 结束 耗时：869 ms -------------
2025-08-07 14:22:14.998 INFO  com.matt.wiki.aspect.LogAspect                    :52   [32m608515223707586560[0;39m ------------- 开始 -------------
2025-08-07 14:22:14.998 INFO  com.matt.wiki.aspect.LogAspect                    :53   [32m608515223707586560[0;39m 请求地址: http://localhost:8080/ebook/list GET
2025-08-07 14:22:14.999 INFO  com.matt.wiki.aspect.LogAspect                    :54   [32m608515223707586560[0;39m 类名方法: com.matt.wiki.controller.EbookController.list
2025-08-07 14:22:14.999 INFO  com.matt.wiki.aspect.LogAspect                    :55   [32m608515223707586560[0;39m 远程地址: 0:0:0:0:0:0:0:1
2025-08-07 14:22:15.001 INFO  com.matt.wiki.aspect.LogAspect                    :77   [32m608515223707586560[0;39m 请求参数: [{"category2Id":607367368720650240,"page":1,"size":1000}]
2025-08-07 14:22:15.273 DEBUG c.m.wiki.mapper.EbookMapper.selectByExample_COUNT :135  [32m608515223707586560[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2025-08-07 14:22:15.274 DEBUG c.m.wiki.mapper.EbookMapper.selectByExample_COUNT :135  [32m608515223707586560[0;39m ==> Parameters: 607367368720650240(Long)
2025-08-07 14:22:15.501 TRACE c.m.wiki.mapper.EbookMapper.selectByExample_COUNT :141  [32m608515223707586560[0;39m <==    Columns: count(0)
2025-08-07 14:22:15.501 TRACE c.m.wiki.mapper.EbookMapper.selectByExample_COUNT :141  [32m608515223707586560[0;39m <==        Row: 1
2025-08-07 14:22:15.501 DEBUG c.m.wiki.mapper.EbookMapper.selectByExample_COUNT :135  [32m608515223707586560[0;39m <==      Total: 1
2025-08-07 14:22:15.503 DEBUG com.matt.wiki.mapper.EbookMapper.selectByExample  :135  [32m608515223707586560[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2025-08-07 14:22:15.504 DEBUG com.matt.wiki.mapper.EbookMapper.selectByExample  :135  [32m608515223707586560[0;39m ==> Parameters: 607367368720650240(Long), 1000(Integer)
2025-08-07 14:22:15.732 TRACE com.matt.wiki.mapper.EbookMapper.selectByExample  :141  [32m608515223707586560[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2025-08-07 14:22:15.732 TRACE com.matt.wiki.mapper.EbookMapper.selectByExample  :141  [32m608515223707586560[0;39m <==        Row: 5, JavaScript 高级编程, 100, 607367368720650240, 深入理解 JavaScript 核心机制与高级应用, null, 0, 100, 30
2025-08-07 14:22:15.732 DEBUG com.matt.wiki.mapper.EbookMapper.selectByExample  :135  [32m608515223707586560[0;39m <==      Total: 1
2025-08-07 14:22:15.733 INFO  com.matt.wiki.service.EbookService                :49   [32m608515223707586560[0;39m 总行数: 1
2025-08-07 14:22:15.733 INFO  com.matt.wiki.service.EbookService                :50   [32m608515223707586560[0;39m 总页数:1
2025-08-07 14:22:15.739 INFO  com.matt.wiki.aspect.LogAspect                    :90   [32m608515223707586560[0;39m 返回结果: {"content":{"list":[{"category1Id":100,"category2Id":607367368720650240,"description":"深入理解 JavaScript 核心机制与高级应用","docCount":0,"id":5,"name":"JavaScript 高级编程","viewCount":100,"voteCount":30}],"total":1},"success":true}
2025-08-07 14:22:15.739 INFO  com.matt.wiki.aspect.LogAspect                    :91   [32m608515223707586560[0;39m ------------- 结束 耗时：741 ms -------------
2025-08-07 14:23:00.005 INFO  com.matt.wiki.job.DocJob                          :30   [32m608515412480626688[0;39m 更新电子书下的文档数据开始
2025-08-07 14:23:00.274 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608515412480626688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 14:23:00.275 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608515412480626688[0;39m ==> Parameters: 
2025-08-07 14:23:00.768 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608515412480626688[0;39m <==    Updates: 4
2025-08-07 14:23:00.769 INFO  com.matt.wiki.job.DocJob                          :33   [32m608515412480626688[0;39m 更新电子书下的文档数据结束，耗时：763毫秒
2025-08-07 14:23:00.770 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608515415689269248[0;39m 生成今日电子书快照开始
2025-08-07 14:23:00.770 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608515415689269248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 14:23:00.771 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608515415689269248[0;39m ==> Parameters: 
2025-08-07 14:23:01.319 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608515415689269248[0;39m <==    Updates: 0
2025-08-07 14:23:01.320 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608515415689269248[0;39m 生成今日电子书快照结束，耗时：550毫秒
2025-08-07 14:24:00.005 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608515664138866688[0;39m 生成今日电子书快照开始
2025-08-07 14:24:00.245 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608515664138866688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 14:24:00.247 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608515664138866688[0;39m ==> Parameters: 
2025-08-07 14:24:01.287 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608515664138866688[0;39m <==    Updates: 0
2025-08-07 14:24:01.288 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608515664138866688[0;39m 生成今日电子书快照结束，耗时：1282毫秒
2025-08-07 14:24:01.289 INFO  com.matt.wiki.job.DocJob                          :30   [32m608515669524353024[0;39m 更新电子书下的文档数据开始
2025-08-07 14:24:01.290 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608515669524353024[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 14:24:01.290 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608515669524353024[0;39m ==> Parameters: 
2025-08-07 14:24:01.902 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608515669524353024[0;39m <==    Updates: 4
2025-08-07 14:24:01.903 INFO  com.matt.wiki.job.DocJob                          :33   [32m608515669524353024[0;39m 更新电子书下的文档数据结束，耗时：614毫秒
2025-08-07 14:25:00.005 INFO  com.matt.wiki.job.DocJob                          :30   [32m608515915797106688[0;39m 更新电子书下的文档数据开始
2025-08-07 14:25:00.249 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608515915797106688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 14:25:00.250 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608515915797106688[0;39m ==> Parameters: 
2025-08-07 14:25:01.092 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608515915797106688[0;39m <==    Updates: 4
2025-08-07 14:25:01.093 INFO  com.matt.wiki.job.DocJob                          :33   [32m608515915797106688[0;39m 更新电子书下的文档数据结束，耗时：1087毫秒
2025-08-07 14:25:01.093 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608515920360509440[0;39m 生成今日电子书快照开始
2025-08-07 14:25:01.094 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608515920360509440[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 14:25:01.094 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608515920360509440[0;39m ==> Parameters: 
2025-08-07 14:25:01.704 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608515920360509440[0;39m <==    Updates: 0
2025-08-07 14:25:01.704 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608515920360509440[0;39m 生成今日电子书快照结束，耗时：611毫秒
2025-08-07 14:25:02.773 INFO  com.matt.wiki.aspect.LogAspect                    :52   [32m608515927406940160[0;39m ------------- 开始 -------------
2025-08-07 14:25:02.773 INFO  com.matt.wiki.aspect.LogAspect                    :53   [32m608515927406940160[0;39m 请求地址: http://localhost:8080/test/list GET
2025-08-07 14:25:02.773 INFO  com.matt.wiki.aspect.LogAspect                    :54   [32m608515927406940160[0;39m 类名方法: com.matt.wiki.controller.TestController.list
2025-08-07 14:25:02.773 INFO  com.matt.wiki.aspect.LogAspect                    :55   [32m608515927406940160[0;39m 远程地址: 127.0.0.1
2025-08-07 14:25:02.773 INFO  com.matt.wiki.aspect.LogAspect                    :77   [32m608515927406940160[0;39m 请求参数: []
2025-08-07 14:25:03.039 DEBUG com.matt.wiki.mapper.TestMapper.list              :135  [32m608515927406940160[0;39m ==>  Preparing: select `id`, `name`, `password` from `test`
2025-08-07 14:25:03.039 DEBUG com.matt.wiki.mapper.TestMapper.list              :135  [32m608515927406940160[0;39m ==> Parameters: 
2025-08-07 14:25:03.295 TRACE com.matt.wiki.mapper.TestMapper.list              :141  [32m608515927406940160[0;39m <==    Columns: id, name, password
2025-08-07 14:25:03.295 TRACE com.matt.wiki.mapper.TestMapper.list              :141  [32m608515927406940160[0;39m <==        Row: 2, test, ysz991203
2025-08-07 14:25:03.296 DEBUG com.matt.wiki.mapper.TestMapper.list              :135  [32m608515927406940160[0;39m <==      Total: 1
2025-08-07 14:25:03.297 INFO  com.matt.wiki.aspect.LogAspect                    :90   [32m608515927406940160[0;39m 返回结果: [{"id":2,"name":"test"}]
2025-08-07 14:25:03.297 INFO  com.matt.wiki.aspect.LogAspect                    :91   [32m608515927406940160[0;39m ------------- 结束 耗时：524 ms -------------
2025-08-07 14:26:00.002 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608516167442763776[0;39m 生成今日电子书快照开始
2025-08-07 14:26:00.518 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608516167442763776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 14:26:00.520 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608516167442763776[0;39m ==> Parameters: 
2025-08-07 14:26:02.839 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608516167442763776[0;39m <==    Updates: 0
2025-08-07 14:26:02.841 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608516167442763776[0;39m 生成今日电子书快照结束，耗时：2838毫秒
2025-08-07 14:26:02.841 INFO  com.matt.wiki.job.DocJob                          :30   [32m608516179350392832[0;39m 更新电子书下的文档数据开始
2025-08-07 14:26:02.842 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608516179350392832[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 14:26:02.843 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608516179350392832[0;39m ==> Parameters: 
2025-08-07 14:26:03.367 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608516179350392832[0;39m <==    Updates: 4
2025-08-07 14:26:03.368 INFO  com.matt.wiki.job.DocJob                          :33   [32m608516179350392832[0;39m 更新电子书下的文档数据结束，耗时：526毫秒
2025-08-07 14:26:05.339 INFO  com.matt.wiki.aspect.LogAspect                    :52   [32m608516189827764224[0;39m ------------- 开始 -------------
2025-08-07 14:26:05.339 INFO  com.matt.wiki.aspect.LogAspect                    :53   [32m608516189827764224[0;39m 请求地址: http://localhost:8080/ebook/list GET
2025-08-07 14:26:05.339 INFO  com.matt.wiki.aspect.LogAspect                    :54   [32m608516189827764224[0;39m 类名方法: com.matt.wiki.controller.EbookController.list
2025-08-07 14:26:05.339 INFO  com.matt.wiki.aspect.LogAspect                    :55   [32m608516189827764224[0;39m 远程地址: 0:0:0:0:0:0:0:1
2025-08-07 14:26:05.340 INFO  com.matt.wiki.aspect.LogAspect                    :77   [32m608516189827764224[0;39m 请求参数: [{"category2Id":101,"page":1,"size":1000}]
2025-08-07 14:26:05.605 DEBUG c.m.wiki.mapper.EbookMapper.selectByExample_COUNT :135  [32m608516189827764224[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2025-08-07 14:26:05.606 DEBUG c.m.wiki.mapper.EbookMapper.selectByExample_COUNT :135  [32m608516189827764224[0;39m ==> Parameters: 101(Long)
2025-08-07 14:26:05.851 TRACE c.m.wiki.mapper.EbookMapper.selectByExample_COUNT :141  [32m608516189827764224[0;39m <==    Columns: count(0)
2025-08-07 14:26:05.852 TRACE c.m.wiki.mapper.EbookMapper.selectByExample_COUNT :141  [32m608516189827764224[0;39m <==        Row: 1
2025-08-07 14:26:05.852 DEBUG c.m.wiki.mapper.EbookMapper.selectByExample_COUNT :135  [32m608516189827764224[0;39m <==      Total: 1
2025-08-07 14:26:05.853 DEBUG com.matt.wiki.mapper.EbookMapper.selectByExample  :135  [32m608516189827764224[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2025-08-07 14:26:05.853 DEBUG com.matt.wiki.mapper.EbookMapper.selectByExample  :135  [32m608516189827764224[0;39m ==> Parameters: 101(Long), 1000(Integer)
2025-08-07 14:26:06.027 INFO  com.matt.wiki.aspect.LogAspect                    :52   [32m608516192713445376[0;39m ------------- 开始 -------------
2025-08-07 14:26:06.027 INFO  com.matt.wiki.aspect.LogAspect                    :53   [32m608516192713445376[0;39m 请求地址: http://localhost:8080/ebook/list GET
2025-08-07 14:26:06.028 INFO  com.matt.wiki.aspect.LogAspect                    :54   [32m608516192713445376[0;39m 类名方法: com.matt.wiki.controller.EbookController.list
2025-08-07 14:26:06.028 INFO  com.matt.wiki.aspect.LogAspect                    :55   [32m608516192713445376[0;39m 远程地址: 0:0:0:0:0:0:0:1
2025-08-07 14:26:06.028 INFO  com.matt.wiki.aspect.LogAspect                    :77   [32m608516192713445376[0;39m 请求参数: [{"category2Id":102,"page":1,"size":1000}]
2025-08-07 14:26:06.294 TRACE com.matt.wiki.mapper.EbookMapper.selectByExample  :141  [32m608516189827764224[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2025-08-07 14:26:06.295 TRACE com.matt.wiki.mapper.EbookMapper.selectByExample  :141  [32m608516189827764224[0;39m <==        Row: 2, Vue 入门教程, 100, 101, 零基础入门 Vue 开发，企业级应用开发最佳前端框架, /image/cover2.png, 4, 90, 18
2025-08-07 14:26:06.295 DEBUG com.matt.wiki.mapper.EbookMapper.selectByExample  :135  [32m608516189827764224[0;39m <==      Total: 1
2025-08-07 14:26:06.295 INFO  com.matt.wiki.service.EbookService                :49   [32m608516189827764224[0;39m 总行数: 1
2025-08-07 14:26:06.295 INFO  com.matt.wiki.service.EbookService                :50   [32m608516189827764224[0;39m 总页数:1
2025-08-07 14:26:06.296 INFO  com.matt.wiki.aspect.LogAspect                    :90   [32m608516189827764224[0;39m 返回结果: {"content":{"list":[{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门 Vue 开发，企业级应用开发最佳前端框架","docCount":4,"id":2,"name":"Vue 入门教程","viewCount":90,"voteCount":18}],"total":1},"success":true}
2025-08-07 14:26:06.296 INFO  com.matt.wiki.aspect.LogAspect                    :91   [32m608516189827764224[0;39m ------------- 结束 耗时：957 ms -------------
2025-08-07 14:26:06.391 DEBUG c.m.wiki.mapper.EbookMapper.selectByExample_COUNT :135  [32m608516192713445376[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2025-08-07 14:26:06.392 DEBUG c.m.wiki.mapper.EbookMapper.selectByExample_COUNT :135  [32m608516192713445376[0;39m ==> Parameters: 102(Long)
2025-08-07 14:26:06.683 TRACE c.m.wiki.mapper.EbookMapper.selectByExample_COUNT :141  [32m608516192713445376[0;39m <==    Columns: count(0)
2025-08-07 14:26:06.683 TRACE c.m.wiki.mapper.EbookMapper.selectByExample_COUNT :141  [32m608516192713445376[0;39m <==        Row: 0
2025-08-07 14:26:06.684 DEBUG c.m.wiki.mapper.EbookMapper.selectByExample_COUNT :135  [32m608516192713445376[0;39m <==      Total: 1
2025-08-07 14:26:06.684 INFO  com.matt.wiki.service.EbookService                :49   [32m608516192713445376[0;39m 总行数: 0
2025-08-07 14:26:06.684 INFO  com.matt.wiki.service.EbookService                :50   [32m608516192713445376[0;39m 总页数:0
2025-08-07 14:26:06.684 INFO  com.matt.wiki.aspect.LogAspect                    :90   [32m608516192713445376[0;39m 返回结果: {"content":{"list":[],"total":0},"success":true}
2025-08-07 14:26:06.684 INFO  com.matt.wiki.aspect.LogAspect                    :91   [32m608516192713445376[0;39m ------------- 结束 耗时：657 ms -------------
2025-08-07 14:26:07.450 INFO  com.matt.wiki.aspect.LogAspect                    :52   [32m608516198681939968[0;39m ------------- 开始 -------------
2025-08-07 14:26:07.450 INFO  com.matt.wiki.aspect.LogAspect                    :53   [32m608516198681939968[0;39m 请求地址: http://localhost:8080/ebook/list GET
2025-08-07 14:26:07.450 INFO  com.matt.wiki.aspect.LogAspect                    :54   [32m608516198681939968[0;39m 类名方法: com.matt.wiki.controller.EbookController.list
2025-08-07 14:26:07.451 INFO  com.matt.wiki.aspect.LogAspect                    :55   [32m608516198681939968[0;39m 远程地址: 0:0:0:0:0:0:0:1
2025-08-07 14:26:07.451 INFO  com.matt.wiki.aspect.LogAspect                    :77   [32m608516198681939968[0;39m 请求参数: [{"category2Id":607367368720650240,"page":1,"size":1000}]
2025-08-07 14:26:07.787 DEBUG c.m.wiki.mapper.EbookMapper.selectByExample_COUNT :135  [32m608516198681939968[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2025-08-07 14:26:07.787 DEBUG c.m.wiki.mapper.EbookMapper.selectByExample_COUNT :135  [32m608516198681939968[0;39m ==> Parameters: 607367368720650240(Long)
2025-08-07 14:26:08.308 TRACE c.m.wiki.mapper.EbookMapper.selectByExample_COUNT :141  [32m608516198681939968[0;39m <==    Columns: count(0)
2025-08-07 14:26:08.309 TRACE c.m.wiki.mapper.EbookMapper.selectByExample_COUNT :141  [32m608516198681939968[0;39m <==        Row: 1
2025-08-07 14:26:08.310 DEBUG c.m.wiki.mapper.EbookMapper.selectByExample_COUNT :135  [32m608516198681939968[0;39m <==      Total: 1
2025-08-07 14:26:08.312 DEBUG com.matt.wiki.mapper.EbookMapper.selectByExample  :135  [32m608516198681939968[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2025-08-07 14:26:08.314 DEBUG com.matt.wiki.mapper.EbookMapper.selectByExample  :135  [32m608516198681939968[0;39m ==> Parameters: 607367368720650240(Long), 1000(Integer)
2025-08-07 14:26:08.709 TRACE com.matt.wiki.mapper.EbookMapper.selectByExample  :141  [32m608516198681939968[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2025-08-07 14:26:08.709 TRACE com.matt.wiki.mapper.EbookMapper.selectByExample  :141  [32m608516198681939968[0;39m <==        Row: 5, JavaScript 高级编程, 100, 607367368720650240, 深入理解 JavaScript 核心机制与高级应用, null, 0, 100, 30
2025-08-07 14:26:08.709 DEBUG com.matt.wiki.mapper.EbookMapper.selectByExample  :135  [32m608516198681939968[0;39m <==      Total: 1
2025-08-07 14:26:08.710 INFO  com.matt.wiki.service.EbookService                :49   [32m608516198681939968[0;39m 总行数: 1
2025-08-07 14:26:08.710 INFO  com.matt.wiki.service.EbookService                :50   [32m608516198681939968[0;39m 总页数:1
2025-08-07 14:26:08.710 INFO  com.matt.wiki.aspect.LogAspect                    :90   [32m608516198681939968[0;39m 返回结果: {"content":{"list":[{"category1Id":100,"category2Id":607367368720650240,"description":"深入理解 JavaScript 核心机制与高级应用","docCount":0,"id":5,"name":"JavaScript 高级编程","viewCount":100,"voteCount":30}],"total":1},"success":true}
2025-08-07 14:26:08.710 INFO  com.matt.wiki.aspect.LogAspect                    :91   [32m608516198681939968[0;39m ------------- 结束 耗时：1260 ms -------------
2025-08-07 14:26:09.541 INFO  com.matt.wiki.websocket.WebSocketServer           :46   [32m608515201750405122[0;39m 连接关闭，token：oYePwGkok4，session id：1！当前连接数：0
2025-08-07 14:27:00.005 INFO  com.matt.wiki.job.DocJob                          :30   [32m608516419113586688[0;39m 更新电子书下的文档数据开始
2025-08-07 14:27:02.389 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608516419113586688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 14:27:02.391 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608516419113586688[0;39m ==> Parameters: 
2025-08-07 14:27:02.892 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608516419113586688[0;39m <==    Updates: 4
2025-08-07 14:27:02.892 INFO  com.matt.wiki.job.DocJob                          :33   [32m608516419113586688[0;39m 更新电子书下的文档数据结束，耗时：2887毫秒
2025-08-07 14:27:02.893 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608516431226736640[0;39m 生成今日电子书快照开始
2025-08-07 14:27:02.893 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608516431226736640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 14:27:02.894 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608516431226736640[0;39m ==> Parameters: 
2025-08-07 14:27:03.367 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608516431226736640[0;39m <==    Updates: 0
2025-08-07 14:27:03.367 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608516431226736640[0;39m 生成今日电子书快照结束，耗时：474毫秒
2025-08-07 14:28:00.002 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608516670759243776[0;39m 生成今日电子书快照开始
2025-08-07 14:28:00.293 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608516670759243776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 14:28:00.293 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608516670759243776[0;39m ==> Parameters: 
2025-08-07 14:28:01.110 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608516670759243776[0;39m <==    Updates: 0
2025-08-07 14:28:01.111 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608516670759243776[0;39m 生成今日电子书快照结束，耗时：1109毫秒
2025-08-07 14:28:01.111 INFO  com.matt.wiki.job.DocJob                          :30   [32m608516675410726912[0;39m 更新电子书下的文档数据开始
2025-08-07 14:28:01.111 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608516675410726912[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 14:28:01.111 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608516675410726912[0;39m ==> Parameters: 
2025-08-07 14:28:01.578 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608516675410726912[0;39m <==    Updates: 4
2025-08-07 14:28:01.578 INFO  com.matt.wiki.job.DocJob                          :33   [32m608516675410726912[0;39m 更新电子书下的文档数据结束，耗时：467毫秒
2025-08-07 14:29:00.005 INFO  com.matt.wiki.job.DocJob                          :30   [32m608516922430066688[0;39m 更新电子书下的文档数据开始
2025-08-07 14:29:00.299 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608516922430066688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 14:29:00.300 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608516922430066688[0;39m ==> Parameters: 
2025-08-07 14:29:00.913 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608516922430066688[0;39m <==    Updates: 4
2025-08-07 14:29:00.914 INFO  com.matt.wiki.job.DocJob                          :33   [32m608516922430066688[0;39m 更新电子书下的文档数据结束，耗时：909毫秒
2025-08-07 14:29:00.914 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608516926242689024[0;39m 生成今日电子书快照开始
2025-08-07 14:29:00.914 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608516926242689024[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 14:29:00.915 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608516926242689024[0;39m ==> Parameters: 
2025-08-07 14:29:01.465 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608516926242689024[0;39m <==    Updates: 0
2025-08-07 14:29:01.467 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608516926242689024[0;39m 生成今日电子书快照结束，耗时：553毫秒
2025-08-07 14:30:00.001 INFO  com.matt.wiki.job.DocJob                          :30   [32m608517174071529472[0;39m 更新电子书下的文档数据开始
2025-08-07 14:30:00.305 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608517174071529472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 14:30:00.305 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608517174071529472[0;39m ==> Parameters: 
2025-08-07 14:30:00.762 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608517174071529472[0;39m <==    Updates: 4
2025-08-07 14:30:00.763 INFO  com.matt.wiki.job.DocJob                          :33   [32m608517174071529472[0;39m 更新电子书下的文档数据结束，耗时：761毫秒
2025-08-07 14:30:00.763 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608517177267589120[0;39m 生成今日电子书快照开始
2025-08-07 14:30:00.763 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608517177267589120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 14:30:00.763 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608517177267589120[0;39m ==> Parameters: 
2025-08-07 14:30:01.432 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608517177267589120[0;39m <==    Updates: 0
2025-08-07 14:30:01.432 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608517177267589120[0;39m 生成今日电子书快照结束，耗时：669毫秒
2025-08-07 14:31:00.002 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608517425733963776[0;39m 生成今日电子书快照开始
2025-08-07 14:31:00.249 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608517425733963776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 14:31:00.250 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608517425733963776[0;39m ==> Parameters: 
2025-08-07 14:31:00.927 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608517425733963776[0;39m <==    Updates: 0
2025-08-07 14:31:00.927 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608517425733963776[0;39m 生成今日电子书快照结束，耗时：923毫秒
2025-08-07 14:31:00.928 INFO  com.matt.wiki.job.DocJob                          :30   [32m608517429617889280[0;39m 更新电子书下的文档数据开始
2025-08-07 14:31:00.928 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608517429617889280[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 14:31:00.928 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608517429617889280[0;39m ==> Parameters: 
2025-08-07 14:31:01.543 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608517429617889280[0;39m <==    Updates: 4
2025-08-07 14:31:01.544 INFO  com.matt.wiki.job.DocJob                          :33   [32m608517429617889280[0;39m 更新电子书下的文档数据结束，耗时：615毫秒
2025-08-07 14:32:00.005 INFO  com.matt.wiki.job.DocJob                          :30   [32m608517677404786688[0;39m 更新电子书下的文档数据开始
2025-08-07 14:32:00.422 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608517677404786688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 14:32:00.423 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608517677404786688[0;39m ==> Parameters: 
2025-08-07 14:32:01.013 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608517677404786688[0;39m <==    Updates: 4
2025-08-07 14:32:01.014 INFO  com.matt.wiki.job.DocJob                          :33   [32m608517677404786688[0;39m 更新电子书下的文档数据结束，耗时：1007毫秒
2025-08-07 14:32:01.014 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608517681636839424[0;39m 生成今日电子书快照开始
2025-08-07 14:32:01.015 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608517681636839424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 14:32:01.016 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608517681636839424[0;39m ==> Parameters: 
2025-08-07 14:32:01.753 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608517681636839424[0;39m <==    Updates: 0
2025-08-07 14:32:01.753 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608517681636839424[0;39m 生成今日电子书快照结束，耗时：738毫秒
2025-08-07 14:33:00.003 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608517929054638080[0;39m 生成今日电子书快照开始
2025-08-07 14:33:00.634 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608517929054638080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 14:33:00.634 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608517929054638080[0;39m ==> Parameters: 
2025-08-07 14:33:01.248 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608517929054638080[0;39m <==    Updates: 0
2025-08-07 14:33:01.248 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608517929054638080[0;39m 生成今日电子书快照结束，耗时：1244毫秒
2025-08-07 14:33:01.248 INFO  com.matt.wiki.job.DocJob                          :30   [32m608517934276546560[0;39m 更新电子书下的文档数据开始
2025-08-07 14:33:01.248 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608517934276546560[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 14:33:01.248 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608517934276546560[0;39m ==> Parameters: 
2025-08-07 14:33:01.814 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608517934276546560[0;39m <==    Updates: 4
2025-08-07 14:33:01.815 INFO  com.matt.wiki.job.DocJob                          :33   [32m608517934276546560[0;39m 更新电子书下的文档数据结束，耗时：567毫秒
2025-08-07 14:34:00.005 INFO  com.matt.wiki.job.DocJob                          :30   [32m608518180721266688[0;39m 更新电子书下的文档数据开始
2025-08-07 14:34:00.231 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608518180721266688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 14:34:00.231 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608518180721266688[0;39m ==> Parameters: 
2025-08-07 14:34:00.668 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608518180721266688[0;39m <==    Updates: 4
2025-08-07 14:34:00.669 INFO  com.matt.wiki.job.DocJob                          :33   [32m608518180721266688[0;39m 更新电子书下的文档数据结束，耗时：663毫秒
2025-08-07 14:34:00.669 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608518183506284544[0;39m 生成今日电子书快照开始
2025-08-07 14:34:00.670 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608518183506284544[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 14:34:00.671 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608518183506284544[0;39m ==> Parameters: 
2025-08-07 14:34:01.140 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608518183506284544[0;39m <==    Updates: 0
2025-08-07 14:34:01.141 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608518183506284544[0;39m 生成今日电子书快照结束，耗时：471毫秒
2025-08-07 14:35:00.004 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608518432375312384[0;39m 生成今日电子书快照开始
2025-08-07 14:35:00.246 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608518432375312384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 14:35:00.247 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608518432375312384[0;39m ==> Parameters: 
2025-08-07 14:35:00.737 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608518432375312384[0;39m <==    Updates: 0
2025-08-07 14:35:00.737 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608518432375312384[0;39m 生成今日电子书快照结束，耗时：733毫秒
2025-08-07 14:35:00.738 INFO  com.matt.wiki.job.DocJob                          :30   [32m608518435453931520[0;39m 更新电子书下的文档数据开始
2025-08-07 14:35:00.738 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608518435453931520[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 14:35:00.739 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608518435453931520[0;39m ==> Parameters: 
2025-08-07 14:35:01.202 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608518435453931520[0;39m <==    Updates: 4
2025-08-07 14:35:01.202 INFO  com.matt.wiki.job.DocJob                          :33   [32m608518435453931520[0;39m 更新电子书下的文档数据结束，耗时：464毫秒
2025-08-07 14:36:00.004 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608518684033552384[0;39m 生成今日电子书快照开始
2025-08-07 14:36:00.227 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608518684033552384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 14:36:00.229 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608518684033552384[0;39m ==> Parameters: 
2025-08-07 14:36:00.685 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608518684033552384[0;39m <==    Updates: 0
2025-08-07 14:36:00.686 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608518684033552384[0;39m 生成今日电子书快照结束，耗时：682毫秒
2025-08-07 14:36:00.686 INFO  com.matt.wiki.job.DocJob                          :30   [32m608518686894067712[0;39m 更新电子书下的文档数据开始
2025-08-07 14:36:00.687 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608518686894067712[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 14:36:00.687 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608518686894067712[0;39m ==> Parameters: 
2025-08-07 14:36:01.126 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608518686894067712[0;39m <==    Updates: 4
2025-08-07 14:36:01.126 INFO  com.matt.wiki.job.DocJob                          :33   [32m608518686894067712[0;39m 更新电子书下的文档数据结束，耗时：440毫秒
2025-08-07 14:37:00.004 INFO  com.matt.wiki.job.DocJob                          :30   [32m608518935691792384[0;39m 更新电子书下的文档数据开始
2025-08-07 14:37:00.252 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608518935691792384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 14:37:00.253 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608518935691792384[0;39m ==> Parameters: 
2025-08-07 14:37:00.787 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608518935691792384[0;39m <==    Updates: 4
2025-08-07 14:37:00.788 INFO  com.matt.wiki.job.DocJob                          :33   [32m608518935691792384[0;39m 更新电子书下的文档数据结束，耗时：783毫秒
2025-08-07 14:37:00.788 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608518938980126720[0;39m 生成今日电子书快照开始
2025-08-07 14:37:00.789 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608518938980126720[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 14:37:00.790 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608518938980126720[0;39m ==> Parameters: 
2025-08-07 14:37:01.583 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608518938980126720[0;39m <==    Updates: 0
2025-08-07 14:37:01.584 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608518938980126720[0;39m 生成今日电子书快照结束，耗时：796毫秒
2025-08-07 14:37:59.984 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608519187266146304[0;39m 生成今日电子书快照开始
2025-08-07 14:38:00.444 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608519187266146304[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 14:38:00.445 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608519187266146304[0;39m ==> Parameters: 
2025-08-07 14:38:01.060 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608519187266146304[0;39m <==    Updates: 0
2025-08-07 14:38:01.060 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608519187266146304[0;39m 生成今日电子书快照结束，耗时：1075毫秒
2025-08-07 14:38:01.061 INFO  com.matt.wiki.job.DocJob                          :30   [32m608519191783411712[0;39m 更新电子书下的文档数据开始
2025-08-07 14:38:01.061 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608519191783411712[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 14:38:01.061 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608519191783411712[0;39m ==> Parameters: 
2025-08-07 14:38:01.603 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608519191783411712[0;39m <==    Updates: 4
2025-08-07 14:38:01.604 INFO  com.matt.wiki.job.DocJob                          :33   [32m608519191783411712[0;39m 更新电子书下的文档数据结束，耗时：543毫秒
2025-08-07 14:39:00.003 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608519439004078080[0;39m 生成今日电子书快照开始
2025-08-07 14:39:00.217 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608519439004078080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 14:39:00.218 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608519439004078080[0;39m ==> Parameters: 
2025-08-07 14:39:00.858 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608519439004078080[0;39m <==    Updates: 0
2025-08-07 14:39:00.858 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608519439004078080[0;39m 生成今日电子书快照结束，耗时：855毫秒
2025-08-07 14:39:00.859 INFO  com.matt.wiki.job.DocJob                          :30   [32m608519442594402304[0;39m 更新电子书下的文档数据开始
2025-08-07 14:39:00.859 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608519442594402304[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 14:39:00.859 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608519442594402304[0;39m ==> Parameters: 
2025-08-07 14:39:01.575 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608519442594402304[0;39m <==    Updates: 4
2025-08-07 14:39:01.575 INFO  com.matt.wiki.job.DocJob                          :33   [32m608519442594402304[0;39m 更新电子书下的文档数据结束，耗时：716毫秒
2025-08-07 14:40:00.002 INFO  com.matt.wiki.job.DocJob                          :30   [32m608519690658123776[0;39m 更新电子书下的文档数据开始
2025-08-07 14:40:00.478 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608519690658123776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 14:40:00.480 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608519690658123776[0;39m ==> Parameters: 
2025-08-07 14:40:01.377 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608519690658123776[0;39m <==    Updates: 4
2025-08-07 14:40:01.377 INFO  com.matt.wiki.job.DocJob                          :33   [32m608519690658123776[0;39m 更新电子书下的文档数据结束，耗时：1374毫秒
2025-08-07 14:40:01.377 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608519696425291776[0;39m 生成今日电子书快照开始
2025-08-07 14:40:01.378 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608519696425291776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 14:40:01.379 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608519696425291776[0;39m ==> Parameters: 
2025-08-07 14:40:01.861 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608519696425291776[0;39m <==    Updates: 0
2025-08-07 14:40:01.862 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608519696425291776[0;39m 生成今日电子书快照结束，耗时：485毫秒
2025-08-07 14:41:00.004 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608519942324752384[0;39m 生成今日电子书快照开始
2025-08-07 14:41:00.564 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608519942324752384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 14:41:00.565 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608519942324752384[0;39m ==> Parameters: 
2025-08-07 14:41:01.178 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608519942324752384[0;39m <==    Updates: 0
2025-08-07 14:41:01.179 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608519942324752384[0;39m 生成今日电子书快照结束，耗时：1175毫秒
2025-08-07 14:41:01.179 INFO  com.matt.wiki.job.DocJob                          :30   [32m608519947253059584[0;39m 更新电子书下的文档数据开始
2025-08-07 14:41:01.179 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608519947253059584[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 14:41:01.180 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608519947253059584[0;39m ==> Parameters: 
2025-08-07 14:41:01.730 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608519947253059584[0;39m <==    Updates: 4
2025-08-07 14:41:01.730 INFO  com.matt.wiki.job.DocJob                          :33   [32m608519947253059584[0;39m 更新电子书下的文档数据结束，耗时：551毫秒
2025-08-07 14:41:12.309 INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener:211  [32m                  [0;39m Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-08-07 14:41:12.311 INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown     :54   [32m                  [0;39m Commencing graceful shutdown. Waiting for active requests to complete
2025-08-07 14:41:12.312 INFO  org.apache.coyote.http11.Http11NioProtocol        :168  [32m                  [0;39m Pausing ProtocolHandler ["http-nio-8080"]
2025-08-07 14:41:12.314 INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown     :76   [32m                  [0;39m Graceful shutdown complete
2025-08-07 14:41:12.314 INFO  org.apache.coyote.http11.Http11NioProtocol        :168  [32m                  [0;39m Stopping ProtocolHandler ["http-nio-8080"]
2025-08-07 14:41:12.321 INFO  com.zaxxer.hikari.HikariDataSource                :349  [32m                  [0;39m HikariPool-1 - Shutdown initiated...
2025-08-07 14:41:12.325 INFO  com.zaxxer.hikari.HikariDataSource                :351  [32m                  [0;39m HikariPool-1 - Shutdown completed.
2025-08-07 14:41:12.383 INFO  com.matt.wiki.WikiApplication                     :53   [32m                  [0;39m Starting WikiApplication using Java 20.0.1 with PID 5729 (/Users/yushuzhan/Documents/GitHub/FullStackPractices/wiki/target/classes started by yushuzhan in /Users/yushuzhan/Documents/GitHub/FullStackPractices/wiki)
2025-08-07 14:41:12.383 INFO  com.matt.wiki.WikiApplication                     :652  [32m                  [0;39m No active profile set, falling back to 1 default profile: "default"
2025-08-07 14:41:12.474 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :294  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode
2025-08-07 14:41:12.475 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :145  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-08-07 14:41:12.477 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :213  [32m                  [0;39m Finished Spring Data repository scanning in 2 ms. Found 0 Redis repository interfaces.
2025-08-07 14:41:12.557 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :111  [32m                  [0;39m Tomcat initialized with port 8080 (http)
2025-08-07 14:41:12.558 INFO  org.apache.coyote.http11.Http11NioProtocol        :168  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8080"]
2025-08-07 14:41:12.558 INFO  org.apache.catalina.core.StandardService          :168  [32m                  [0;39m Starting service [Tomcat]
2025-08-07 14:41:12.558 INFO  org.apache.catalina.core.StandardEngine           :168  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-08-07 14:41:12.562 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :168  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2025-08-07 14:41:12.562 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :301  [32m                  [0;39m Root WebApplicationContext: initialization completed in 177 ms
2025-08-07 14:41:12.979 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :59   [32m                  [0;39m LiveReload server is running on port 35729
2025-08-07 14:41:12.988 INFO  org.apache.coyote.http11.Http11NioProtocol        :168  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8080"]
2025-08-07 14:41:12.988 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :243  [32m                  [0;39m Tomcat started on port 8080 (http) with context path '/'
2025-08-07 14:41:12.991 INFO  com.matt.wiki.WikiApplication                     :59   [32m                  [0;39m Started WikiApplication in 0.626 seconds (process running for 1160.257)
2025-08-07 14:41:12.992 INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener :63   [32m                  [0;39m Condition evaluation unchanged
2025-08-07 14:41:12.992 INFO  com.matt.wiki.WikiApplication                     :168  [32m                  [0;39m Start Successful
2025-08-07 14:41:12.993 INFO  com.matt.wiki.WikiApplication                     :168  [32m                  [0;39m 地址:	http://127.0.0.1:8080
2025-08-07 14:42:00.006 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608520193991380992[0;39m 生成今日电子书快照开始
2025-08-07 14:42:00.006 INFO  com.zaxxer.hikari.HikariDataSource                :109  [32m608520193991380992[0;39m HikariPool-2 - Starting...
2025-08-07 14:42:02.325 INFO  com.zaxxer.hikari.pool.HikariPool                 :575  [32m608520193991380992[0;39m HikariPool-2 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2439bced
2025-08-07 14:42:02.326 INFO  com.zaxxer.hikari.HikariDataSource                :122  [32m608520193991380992[0;39m HikariPool-2 - Start completed.
2025-08-07 14:42:02.326 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608520193991380992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 14:42:02.327 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608520193991380992[0;39m ==> Parameters: 
2025-08-07 14:42:02.789 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608520193991380992[0;39m <==    Updates: 0
2025-08-07 14:42:02.790 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608520193991380992[0;39m 生成今日电子书快照结束，耗时：2784毫秒
2025-08-07 14:42:02.790 INFO  com.matt.wiki.job.DocJob                          :30   [32m608520205668323328[0;39m 更新电子书下的文档数据开始
2025-08-07 14:42:02.791 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608520205668323328[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 14:42:02.791 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608520205668323328[0;39m ==> Parameters: 
2025-08-07 14:42:03.241 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608520205668323328[0;39m <==    Updates: 4
2025-08-07 14:42:03.242 INFO  com.matt.wiki.job.DocJob                          :33   [32m608520205668323328[0;39m 更新电子书下的文档数据结束，耗时：452毫秒
2025-08-07 14:42:29.245 INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener:211  [32m                  [0;39m Restarting due to 106 class path changes (0 additions, 106 deletions, 0 modifications)
2025-08-07 14:42:29.246 INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown     :54   [32m                  [0;39m Commencing graceful shutdown. Waiting for active requests to complete
2025-08-07 14:42:29.246 INFO  org.apache.coyote.http11.Http11NioProtocol        :168  [32m                  [0;39m Pausing ProtocolHandler ["http-nio-8080"]
2025-08-07 14:42:29.248 INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown     :76   [32m                  [0;39m Graceful shutdown complete
2025-08-07 14:42:29.249 INFO  org.apache.coyote.http11.Http11NioProtocol        :168  [32m                  [0;39m Stopping ProtocolHandler ["http-nio-8080"]
2025-08-07 14:42:29.251 INFO  com.zaxxer.hikari.HikariDataSource                :349  [32m                  [0;39m HikariPool-2 - Shutdown initiated...
2025-08-07 14:42:29.252 INFO  com.zaxxer.hikari.HikariDataSource                :351  [32m                  [0;39m HikariPool-2 - Shutdown completed.
2025-08-07 14:42:33.403 INFO  com.matt.wiki.WikiApplication                     :53   [32m                  [0;39m Starting WikiApplication using Java 20.0.1 with PID 5729 (/Users/yushuzhan/Documents/GitHub/FullStackPractices/wiki/target/classes started by yushuzhan in /Users/yushuzhan/Documents/GitHub/FullStackPractices/wiki)
2025-08-07 14:42:33.403 INFO  com.matt.wiki.WikiApplication                     :652  [32m                  [0;39m No active profile set, falling back to 1 default profile: "default"
2025-08-07 14:42:33.500 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :294  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode
2025-08-07 14:42:33.500 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :145  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-08-07 14:42:33.507 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :213  [32m                  [0;39m Finished Spring Data repository scanning in 6 ms. Found 0 Redis repository interfaces.
2025-08-07 14:42:33.586 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :111  [32m                  [0;39m Tomcat initialized with port 8080 (http)
2025-08-07 14:42:33.587 INFO  org.apache.catalina.core.StandardService          :168  [32m                  [0;39m Starting service [Tomcat]
2025-08-07 14:42:33.588 INFO  org.apache.catalina.core.StandardEngine           :168  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-08-07 14:42:33.594 INFO  o.a.c.c.ContainerBase.[Tomcat-1].[localhost].[/]  :168  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2025-08-07 14:42:33.594 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :301  [32m                  [0;39m Root WebApplicationContext: initialization completed in 190 ms
2025-08-07 14:42:33.909 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :59   [32m                  [0;39m LiveReload server is running on port 35729
2025-08-07 14:42:33.928 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :243  [32m                  [0;39m Tomcat started on port 8080 (http) with context path '/'
2025-08-07 14:42:33.939 INFO  com.matt.wiki.WikiApplication                     :59   [32m                  [0;39m Started WikiApplication in 0.55 seconds (process running for 1241.204)
2025-08-07 14:42:33.940 INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener :63   [32m                  [0;39m Condition evaluation unchanged
2025-08-07 14:42:33.941 INFO  com.matt.wiki.WikiApplication                     :168  [32m                  [0;39m Start Successful
2025-08-07 14:42:33.941 INFO  com.matt.wiki.WikiApplication                     :168  [32m                  [0;39m 地址:	http://127.0.0.1:8080
2025-08-07 14:43:00.005 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608520445645426688[0;39m 生成今日电子书快照开始
2025-08-07 14:43:00.006 INFO  com.zaxxer.hikari.HikariDataSource                :109  [32m608520445645426688[0;39m HikariPool-3 - Starting...
2025-08-07 14:43:03.296 INFO  com.zaxxer.hikari.pool.HikariPool                 :575  [32m608520445645426688[0;39m HikariPool-3 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3ff9fef1
2025-08-07 14:43:03.297 INFO  com.zaxxer.hikari.HikariDataSource                :122  [32m608520445645426688[0;39m HikariPool-3 - Start completed.
2025-08-07 14:43:03.297 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608520445645426688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 14:43:03.298 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608520445645426688[0;39m ==> Parameters: 
2025-08-07 14:43:03.776 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608520445645426688[0;39m <==    Updates: 0
2025-08-07 14:43:03.776 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608520445645426688[0;39m 生成今日电子书快照结束，耗时：3770毫秒
2025-08-07 14:43:03.777 INFO  com.matt.wiki.job.DocJob                          :30   [32m608520461466341376[0;39m 更新电子书下的文档数据开始
2025-08-07 14:43:03.778 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608520461466341376[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 14:43:03.778 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608520461466341376[0;39m ==> Parameters: 
2025-08-07 14:43:04.248 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608520461466341376[0;39m <==    Updates: 4
2025-08-07 14:43:04.248 INFO  com.matt.wiki.job.DocJob                          :33   [32m608520461466341376[0;39m 更新电子书下的文档数据结束，耗时：471毫秒
2025-08-07 14:44:00.004 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608520697299472384[0;39m 生成今日电子书快照开始
2025-08-07 14:44:00.236 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608520697299472384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 14:44:00.236 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608520697299472384[0;39m ==> Parameters: 
2025-08-07 14:44:00.803 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608520697299472384[0;39m <==    Updates: 0
2025-08-07 14:44:00.803 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608520697299472384[0;39m 生成今日电子书快照结束，耗时：799毫秒
2025-08-07 14:44:00.803 INFO  com.matt.wiki.job.DocJob                          :30   [32m608520700650721280[0;39m 更新电子书下的文档数据开始
2025-08-07 14:44:00.804 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608520700650721280[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 14:44:00.805 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608520700650721280[0;39m ==> Parameters: 
2025-08-07 14:44:01.336 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608520700650721280[0;39m <==    Updates: 4
2025-08-07 14:44:01.337 INFO  com.matt.wiki.job.DocJob                          :33   [32m608520700650721280[0;39m 更新电子书下的文档数据结束，耗时：533毫秒
2025-08-07 14:45:00.003 INFO  com.matt.wiki.job.DocJob                          :30   [32m608520948953518080[0;39m 更新电子书下的文档数据开始
2025-08-07 14:45:00.246 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608520948953518080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 14:45:00.248 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608520948953518080[0;39m ==> Parameters: 
2025-08-07 14:45:00.701 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608520948953518080[0;39m <==    Updates: 4
2025-08-07 14:45:00.703 INFO  com.matt.wiki.job.DocJob                          :33   [32m608520948953518080[0;39m 更新电子书下的文档数据结束，耗时：700毫秒
2025-08-07 14:45:00.704 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608520951893725184[0;39m 生成今日电子书快照开始
2025-08-07 14:45:00.704 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608520951893725184[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 14:45:00.705 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608520951893725184[0;39m ==> Parameters: 
2025-08-07 14:45:01.233 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608520951893725184[0;39m <==    Updates: 0
2025-08-07 14:45:01.233 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608520951893725184[0;39m 生成今日电子书快照结束，耗时：529毫秒
2025-08-07 14:46:00.003 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608521200611758080[0;39m 生成今日电子书快照开始
2025-08-07 14:46:00.392 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608521200611758080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 14:46:00.392 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608521200611758080[0;39m ==> Parameters: 
2025-08-07 14:46:01.007 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608521200611758080[0;39m <==    Updates: 0
2025-08-07 14:46:01.007 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608521200611758080[0;39m 生成今日电子书快照结束，耗时：1004毫秒
2025-08-07 14:46:01.007 INFO  com.matt.wiki.job.DocJob                          :30   [32m608521204822839296[0;39m 更新电子书下的文档数据开始
2025-08-07 14:46:01.008 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608521204822839296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 14:46:01.008 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608521204822839296[0;39m ==> Parameters: 
2025-08-07 14:46:01.723 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608521204822839296[0;39m <==    Updates: 4
2025-08-07 14:46:01.723 INFO  com.matt.wiki.job.DocJob                          :33   [32m608521204822839296[0;39m 更新电子书下的文档数据结束，耗时：716毫秒
2025-08-07 14:47:00.005 INFO  com.matt.wiki.job.DocJob                          :30   [32m608521452278386688[0;39m 更新电子书下的文档数据开始
2025-08-07 14:47:00.248 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608521452278386688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 14:47:00.248 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608521452278386688[0;39m ==> Parameters: 
2025-08-07 14:47:00.799 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608521452278386688[0;39m <==    Updates: 4
2025-08-07 14:47:00.800 INFO  com.matt.wiki.job.DocJob                          :33   [32m608521452278386688[0;39m 更新电子书下的文档数据结束，耗时：795毫秒
2025-08-07 14:47:00.800 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608521455612858368[0;39m 生成今日电子书快照开始
2025-08-07 14:47:00.800 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608521455612858368[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 14:47:00.801 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608521455612858368[0;39m ==> Parameters: 
2025-08-07 14:47:01.525 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608521455612858368[0;39m <==    Updates: 0
2025-08-07 14:47:01.525 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608521455612858368[0;39m 生成今日电子书快照结束，耗时：725毫秒
2025-08-07 14:47:18.603 INFO  o.a.c.c.ContainerBase.[Tomcat-1].[localhost].[/]  :168  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-08-07 14:47:18.603 INFO  org.springframework.web.servlet.DispatcherServlet :532  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2025-08-07 14:47:18.604 INFO  org.springframework.web.servlet.DispatcherServlet :554  [32m                  [0;39m Completed initialization in 1 ms
2025-08-07 14:47:18.607 INFO  com.matt.wiki.interceptor.LoginInterceptor        :31   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2025-08-07 14:47:18.607 INFO  com.matt.wiki.interceptor.LoginInterceptor        :42   [32m                  [0;39m 接口登录拦截：，path：http://127.0.0.1:8080/
2025-08-07 14:47:18.607 INFO  com.matt.wiki.interceptor.LoginInterceptor        :46   [32m                  [0;39m 登录校验开始，token：null
2025-08-07 14:47:18.607 INFO  com.matt.wiki.interceptor.LoginInterceptor        :48   [32m                  [0;39m token为空，请求被拦截
2025-08-07 14:48:00.000 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608521703915655168[0;39m 生成今日电子书快照开始
2025-08-07 14:48:00.218 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608521703915655168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 14:48:00.219 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608521703915655168[0;39m ==> Parameters: 
2025-08-07 14:48:00.713 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608521703915655168[0;39m <==    Updates: 0
2025-08-07 14:48:00.714 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608521703915655168[0;39m 生成今日电子书快照结束，耗时：714毫秒
2025-08-07 14:48:00.714 INFO  com.matt.wiki.job.DocJob                          :30   [32m608521706910388224[0;39m 更新电子书下的文档数据开始
2025-08-07 14:48:00.714 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608521706910388224[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 14:48:00.715 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608521706910388224[0;39m ==> Parameters: 
2025-08-07 14:48:01.174 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608521706910388224[0;39m <==    Updates: 4
2025-08-07 14:48:01.175 INFO  com.matt.wiki.job.DocJob                          :33   [32m608521706910388224[0;39m 更新电子书下的文档数据结束，耗时：461毫秒
2025-08-07 14:49:00.005 INFO  com.matt.wiki.job.DocJob                          :30   [32m608521955594866688[0;39m 更新电子书下的文档数据开始
2025-08-07 14:49:00.225 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608521955594866688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 14:49:00.226 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608521955594866688[0;39m ==> Parameters: 
2025-08-07 14:49:00.924 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608521955594866688[0;39m <==    Updates: 4
2025-08-07 14:49:00.925 INFO  com.matt.wiki.job.DocJob                          :33   [32m608521955594866688[0;39m 更新电子书下的文档数据结束，耗时：920毫秒
2025-08-07 14:49:00.926 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608521959457820672[0;39m 生成今日电子书快照开始
2025-08-07 14:49:00.926 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608521959457820672[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 14:49:00.927 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608521959457820672[0;39m ==> Parameters: 
2025-08-07 14:49:01.540 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608521959457820672[0;39m <==    Updates: 0
2025-08-07 14:49:01.540 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608521959457820672[0;39m 生成今日电子书快照结束，耗时：614毫秒
2025-08-07 14:50:00.002 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608522207240523776[0;39m 生成今日电子书快照开始
2025-08-07 14:50:00.231 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608522207240523776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 14:50:00.232 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608522207240523776[0;39m ==> Parameters: 
2025-08-07 14:50:00.716 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608522207240523776[0;39m <==    Updates: 0
2025-08-07 14:50:00.716 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608522207240523776[0;39m 生成今日电子书快照结束，耗时：713毫秒
2025-08-07 14:50:00.716 INFO  com.matt.wiki.job.DocJob                          :30   [32m608522210235256832[0;39m 更新电子书下的文档数据开始
2025-08-07 14:50:00.717 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608522210235256832[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 14:50:00.717 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608522210235256832[0;39m ==> Parameters: 
2025-08-07 14:50:01.196 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608522210235256832[0;39m <==    Updates: 4
2025-08-07 14:50:01.197 INFO  com.matt.wiki.job.DocJob                          :33   [32m608522210235256832[0;39m 更新电子书下的文档数据结束，耗时：480毫秒
2025-08-07 14:51:00.005 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608522458911346688[0;39m 生成今日电子书快照开始
2025-08-07 14:51:00.249 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608522458911346688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 14:51:00.250 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608522458911346688[0;39m ==> Parameters: 
2025-08-07 14:51:00.700 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608522458911346688[0;39m <==    Updates: 0
2025-08-07 14:51:00.706 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608522458911346688[0;39m 生成今日电子书快照结束，耗时：700毫秒
2025-08-07 14:51:00.708 INFO  com.matt.wiki.job.DocJob                          :30   [32m608522461859942400[0;39m 更新电子书下的文档数据开始
2025-08-07 14:51:00.710 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608522461859942400[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 14:51:00.712 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608522461859942400[0;39m ==> Parameters: 
2025-08-07 14:51:01.163 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608522461859942400[0;39m <==    Updates: 4
2025-08-07 14:51:01.164 INFO  com.matt.wiki.job.DocJob                          :33   [32m608522461859942400[0;39m 更新电子书下的文档数据结束，耗时：456毫秒
2025-08-07 14:52:00.003 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608522710561198080[0;39m 生成今日电子书快照开始
2025-08-07 14:52:00.244 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608522710561198080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 14:52:00.244 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608522710561198080[0;39m ==> Parameters: 
2025-08-07 14:52:01.047 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608522710561198080[0;39m <==    Updates: 0
2025-08-07 14:52:01.048 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608522710561198080[0;39m 生成今日电子书快照结束，耗时：1045毫秒
2025-08-07 14:52:01.048 INFO  com.matt.wiki.job.DocJob                          :30   [32m608522714944245760[0;39m 更新电子书下的文档数据开始
2025-08-07 14:52:01.048 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608522714944245760[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 14:52:01.049 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608522714944245760[0;39m ==> Parameters: 
2025-08-07 14:52:01.660 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608522714944245760[0;39m <==    Updates: 4
2025-08-07 14:52:01.661 INFO  com.matt.wiki.job.DocJob                          :33   [32m608522714944245760[0;39m 更新电子书下的文档数据结束，耗时：613毫秒
2025-08-07 14:53:00.004 INFO  com.matt.wiki.job.DocJob                          :30   [32m608522962223632384[0;39m 更新电子书下的文档数据开始
2025-08-07 14:53:00.246 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608522962223632384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 14:53:00.246 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608522962223632384[0;39m ==> Parameters: 
2025-08-07 14:53:00.767 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608522962223632384[0;39m <==    Updates: 4
2025-08-07 14:53:00.768 INFO  com.matt.wiki.job.DocJob                          :33   [32m608522962223632384[0;39m 更新电子书下的文档数据结束，耗时：763毫秒
2025-08-07 14:53:00.768 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608522965428080640[0;39m 生成今日电子书快照开始
2025-08-07 14:53:00.769 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608522965428080640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 14:53:00.769 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608522965428080640[0;39m ==> Parameters: 
2025-08-07 14:53:01.564 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608522965428080640[0;39m <==    Updates: 0
2025-08-07 14:53:01.565 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608522965428080640[0;39m 生成今日电子书快照结束，耗时：797毫秒
2025-08-07 14:54:00.004 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608523213881872384[0;39m 生成今日电子书快照开始
2025-08-07 14:54:00.255 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608523213881872384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 14:54:00.256 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608523213881872384[0;39m ==> Parameters: 
2025-08-07 14:54:01.004 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608523213881872384[0;39m <==    Updates: 0
2025-08-07 14:54:01.005 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608523213881872384[0;39m 生成今日电子书快照结束，耗时：1000毫秒
2025-08-07 14:54:01.006 INFO  com.matt.wiki.job.DocJob                          :30   [32m608523218084564992[0;39m 更新电子书下的文档数据开始
2025-08-07 14:54:01.006 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608523218084564992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 14:54:01.007 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608523218084564992[0;39m ==> Parameters: 
2025-08-07 14:54:01.673 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608523218084564992[0;39m <==    Updates: 4
2025-08-07 14:54:01.673 INFO  com.matt.wiki.job.DocJob                          :33   [32m608523218084564992[0;39m 更新电子书下的文档数据结束，耗时：667毫秒
2025-08-07 14:55:00.005 INFO  com.matt.wiki.job.DocJob                          :30   [32m608523465544306688[0;39m 更新电子书下的文档数据开始
2025-08-07 14:55:00.250 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608523465544306688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 14:55:00.251 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608523465544306688[0;39m ==> Parameters: 
2025-08-07 14:55:00.687 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608523465544306688[0;39m <==    Updates: 4
2025-08-07 14:55:00.688 INFO  com.matt.wiki.job.DocJob                          :33   [32m608523465544306688[0;39m 更新电子书下的文档数据结束，耗时：683毫秒
2025-08-07 14:55:00.688 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608523468409016320[0;39m 生成今日电子书快照开始
2025-08-07 14:55:00.688 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608523468409016320[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 14:55:00.689 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608523468409016320[0;39m ==> Parameters: 
2025-08-07 14:55:01.522 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608523468409016320[0;39m <==    Updates: 0
2025-08-07 14:55:01.523 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608523468409016320[0;39m 生成今日电子书快照结束，耗时：835毫秒
2025-08-07 14:56:00.005 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608523717202546688[0;39m 生成今日电子书快照开始
2025-08-07 14:56:00.457 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608523717202546688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 14:56:00.457 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608523717202546688[0;39m ==> Parameters: 
2025-08-07 14:56:01.202 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608523717202546688[0;39m <==    Updates: 0
2025-08-07 14:56:01.202 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608523717202546688[0;39m 生成今日电子书快照结束，耗时：1197毫秒
2025-08-07 14:56:01.202 INFO  com.matt.wiki.job.DocJob                          :30   [32m608523722223128576[0;39m 更新电子书下的文档数据开始
2025-08-07 14:56:01.203 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608523722223128576[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 14:56:01.203 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608523722223128576[0;39m ==> Parameters: 
2025-08-07 14:56:01.994 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608523722223128576[0;39m <==    Updates: 4
2025-08-07 14:56:01.994 INFO  com.matt.wiki.job.DocJob                          :33   [32m608523722223128576[0;39m 更新电子书下的文档数据结束，耗时：791毫秒
2025-08-07 14:57:00.001 INFO  com.matt.wiki.job.DocJob                          :30   [32m608523968844009472[0;39m 更新电子书下的文档数据开始
2025-08-07 14:57:00.253 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608523968844009472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 14:57:00.254 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608523968844009472[0;39m ==> Parameters: 
2025-08-07 14:57:00.874 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608523968844009472[0;39m <==    Updates: 4
2025-08-07 14:57:00.875 INFO  com.matt.wiki.job.DocJob                          :33   [32m608523968844009472[0;39m 更新电子书下的文档数据结束，耗时：873毫秒
2025-08-07 14:57:00.875 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608523972509831168[0;39m 生成今日电子书快照开始
2025-08-07 14:57:00.876 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608523972509831168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 14:57:00.877 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608523972509831168[0;39m ==> Parameters: 
2025-08-07 14:57:01.591 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608523972509831168[0;39m <==    Updates: 0
2025-08-07 14:57:01.592 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608523972509831168[0;39m 生成今日电子书快照结束，耗时：717毫秒
2025-08-07 14:58:00.005 INFO  com.matt.wiki.job.DocJob                          :30   [32m608524220519026688[0;39m 更新电子书下的文档数据开始
2025-08-07 14:58:00.223 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608524220519026688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 14:58:00.224 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608524220519026688[0;39m ==> Parameters: 
2025-08-07 14:58:00.686 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608524220519026688[0;39m <==    Updates: 4
2025-08-07 14:58:00.686 INFO  com.matt.wiki.job.DocJob                          :33   [32m608524220519026688[0;39m 更新电子书下的文档数据结束，耗时：681毫秒
2025-08-07 14:58:00.687 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608524223379542016[0;39m 生成今日电子书快照开始
2025-08-07 14:58:00.687 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608524223379542016[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 14:58:00.688 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608524223379542016[0;39m ==> Parameters: 
2025-08-07 14:58:01.157 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608524223379542016[0;39m <==    Updates: 0
2025-08-07 14:58:01.158 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608524223379542016[0;39m 生成今日电子书快照结束，耗时：471毫秒
2025-08-07 14:59:00.006 INFO  com.matt.wiki.job.DocJob                          :30   [32m608524472181460992[0;39m 更新电子书下的文档数据开始
2025-08-07 14:59:00.219 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608524472181460992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 14:59:00.220 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608524472181460992[0;39m ==> Parameters: 
2025-08-07 14:59:00.685 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608524472181460992[0;39m <==    Updates: 4
2025-08-07 14:59:00.685 INFO  com.matt.wiki.job.DocJob                          :33   [32m608524472181460992[0;39m 更新电子书下的文档数据结束，耗时：678毫秒
2025-08-07 14:59:00.686 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608524475033587712[0;39m 生成今日电子书快照开始
2025-08-07 14:59:00.686 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608524475033587712[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 14:59:00.688 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608524475033587712[0;39m ==> Parameters: 
2025-08-07 14:59:01.141 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608524475033587712[0;39m <==    Updates: 0
2025-08-07 14:59:01.142 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608524475033587712[0;39m 生成今日电子书快照结束，耗时：456毫秒
2025-08-07 15:00:00.001 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608524723818729472[0;39m 生成今日电子书快照开始
2025-08-07 15:00:00.247 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608524723818729472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 15:00:00.248 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608524723818729472[0;39m ==> Parameters: 
2025-08-07 15:00:01.004 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608524723818729472[0;39m <==    Updates: 0
2025-08-07 15:00:01.005 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608524723818729472[0;39m 生成今日电子书快照结束，耗时：1002毫秒
2025-08-07 15:00:01.005 INFO  com.matt.wiki.job.DocJob                          :30   [32m608524728029810688[0;39m 更新电子书下的文档数据开始
2025-08-07 15:00:01.005 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608524728029810688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 15:00:01.006 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608524728029810688[0;39m ==> Parameters: 
2025-08-07 15:00:01.713 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608524728029810688[0;39m <==    Updates: 4
2025-08-07 15:00:01.714 INFO  com.matt.wiki.job.DocJob                          :33   [32m608524728029810688[0;39m 更新电子书下的文档数据结束，耗时：709毫秒
2025-08-07 15:01:00.005 INFO  com.matt.wiki.job.DocJob                          :30   [32m608524975493746688[0;39m 更新电子书下的文档数据开始
2025-08-07 15:01:00.288 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608524975493746688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 15:01:00.289 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608524975493746688[0;39m ==> Parameters: 
2025-08-07 15:01:00.900 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608524975493746688[0;39m <==    Updates: 4
2025-08-07 15:01:00.901 INFO  com.matt.wiki.job.DocJob                          :33   [32m608524975493746688[0;39m 更新电子书下的文档数据结束，耗时：896毫秒
2025-08-07 15:01:00.901 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608524979251843072[0;39m 生成今日电子书快照开始
2025-08-07 15:01:00.901 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608524979251843072[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 15:01:00.902 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608524979251843072[0;39m ==> Parameters: 
2025-08-07 15:01:01.515 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608524979251843072[0;39m <==    Updates: 0
2025-08-07 15:01:01.516 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608524979251843072[0;39m 生成今日电子书快照结束，耗时：615毫秒
2025-08-07 15:02:00.001 INFO  com.matt.wiki.job.DocJob                          :30   [32m608525227135209472[0;39m 更新电子书下的文档数据开始
2025-08-07 15:02:00.219 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608525227135209472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 15:02:00.220 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608525227135209472[0;39m ==> Parameters: 
2025-08-07 15:02:00.657 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608525227135209472[0;39m <==    Updates: 4
2025-08-07 15:02:00.658 INFO  com.matt.wiki.job.DocJob                          :33   [32m608525227135209472[0;39m 更新电子书下的文档数据结束，耗时：655毫秒
2025-08-07 15:02:00.658 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608525229890867200[0;39m 生成今日电子书快照开始
2025-08-07 15:02:00.658 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608525229890867200[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 15:02:00.659 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608525229890867200[0;39m ==> Parameters: 
2025-08-07 15:02:01.119 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608525229890867200[0;39m <==    Updates: 0
2025-08-07 15:02:01.120 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608525229890867200[0;39m 生成今日电子书快照结束，耗时：462毫秒
2025-08-07 15:03:00.005 INFO  com.matt.wiki.job.DocJob                          :30   [32m608525478810226688[0;39m 更新电子书下的文档数据开始
2025-08-07 15:03:00.229 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608525478810226688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 15:03:00.230 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608525478810226688[0;39m ==> Parameters: 
2025-08-07 15:03:00.672 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608525478810226688[0;39m <==    Updates: 4
2025-08-07 15:03:00.673 INFO  com.matt.wiki.job.DocJob                          :33   [32m608525478810226688[0;39m 更新电子书下的文档数据结束，耗时：668毫秒
2025-08-07 15:03:00.673 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608525481612021760[0;39m 生成今日电子书快照开始
2025-08-07 15:03:00.673 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608525481612021760[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 15:03:00.674 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608525481612021760[0;39m ==> Parameters: 
2025-08-07 15:03:01.145 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608525481612021760[0;39m <==    Updates: 0
2025-08-07 15:03:01.145 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608525481612021760[0;39m 生成今日电子书快照结束，耗时：472毫秒
2025-08-07 15:04:00.001 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608525730451689472[0;39m 生成今日电子书快照开始
2025-08-07 15:04:00.222 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608525730451689472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 15:04:00.223 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608525730451689472[0;39m ==> Parameters: 
2025-08-07 15:04:00.670 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608525730451689472[0;39m <==    Updates: 0
2025-08-07 15:04:00.670 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608525730451689472[0;39m 生成今日电子书快照结束，耗时：668毫秒
2025-08-07 15:04:00.671 INFO  com.matt.wiki.job.DocJob                          :30   [32m608525733261873152[0;39m 更新电子书下的文档数据开始
2025-08-07 15:04:00.671 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608525733261873152[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 15:04:00.671 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608525733261873152[0;39m ==> Parameters: 
2025-08-07 15:04:01.110 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608525733261873152[0;39m <==    Updates: 4
2025-08-07 15:04:01.110 INFO  com.matt.wiki.job.DocJob                          :33   [32m608525733261873152[0;39m 更新电子书下的文档数据结束，耗时：439毫秒
2025-08-07 15:05:00.001 INFO  com.matt.wiki.job.DocJob                          :30   [32m608525982109929472[0;39m 更新电子书下的文档数据开始
2025-08-07 15:05:00.224 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608525982109929472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 15:05:00.225 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608525982109929472[0;39m ==> Parameters: 
2025-08-07 15:05:00.669 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608525982109929472[0;39m <==    Updates: 4
2025-08-07 15:05:00.670 INFO  com.matt.wiki.job.DocJob                          :33   [32m608525982109929472[0;39m 更新电子书下的文档数据结束，耗时：668毫秒
2025-08-07 15:05:00.671 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608525984920113152[0;39m 生成今日电子书快照开始
2025-08-07 15:05:00.671 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608525984920113152[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 15:05:00.673 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608525984920113152[0;39m ==> Parameters: 
2025-08-07 15:05:01.143 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608525984920113152[0;39m <==    Updates: 0
2025-08-07 15:05:01.143 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608525984920113152[0;39m 生成今日电子书快照结束，耗时：472毫秒
2025-08-07 15:05:59.932 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608526233478762496[0;39m 生成今日电子书快照开始
2025-08-07 15:06:00.167 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608526233478762496[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 15:06:00.167 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608526233478762496[0;39m ==> Parameters: 
2025-08-07 15:06:00.655 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608526233478762496[0;39m <==    Updates: 0
2025-08-07 15:06:00.656 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608526233478762496[0;39m 生成今日电子书快照结束，耗时：724毫秒
2025-08-07 15:06:00.656 INFO  com.matt.wiki.job.DocJob                          :30   [32m608526236515438592[0;39m 更新电子书下的文档数据开始
2025-08-07 15:06:00.657 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608526236515438592[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 15:06:00.657 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608526236515438592[0;39m ==> Parameters: 
2025-08-07 15:06:01.270 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608526236515438592[0;39m <==    Updates: 4
2025-08-07 15:06:01.270 INFO  com.matt.wiki.job.DocJob                          :33   [32m608526236515438592[0;39m 更新电子书下的文档数据结束，耗时：614毫秒
2025-08-07 15:07:00.000 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608526485422215168[0;39m 生成今日电子书快照开始
2025-08-07 15:07:00.233 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608526485422215168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 15:07:00.234 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608526485422215168[0;39m ==> Parameters: 
2025-08-07 15:07:00.709 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608526485422215168[0;39m <==    Updates: 0
2025-08-07 15:07:00.710 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608526485422215168[0;39m 生成今日电子书快照结束，耗时：710毫秒
2025-08-07 15:07:00.710 INFO  com.matt.wiki.job.DocJob                          :30   [32m608526488400171008[0;39m 更新电子书下的文档数据开始
2025-08-07 15:07:00.711 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608526488400171008[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 15:07:00.711 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608526488400171008[0;39m ==> Parameters: 
2025-08-07 15:07:01.204 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608526488400171008[0;39m <==    Updates: 4
2025-08-07 15:07:01.205 INFO  com.matt.wiki.job.DocJob                          :33   [32m608526488400171008[0;39m 更新电子书下的文档数据结束，耗时：495毫秒
2025-08-07 15:08:00.002 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608526737088843776[0;39m 生成今日电子书快照开始
2025-08-07 15:08:00.261 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608526737088843776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 15:08:00.261 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608526737088843776[0;39m ==> Parameters: 
2025-08-07 15:08:00.776 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608526737088843776[0;39m <==    Updates: 0
2025-08-07 15:08:00.777 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608526737088843776[0;39m 生成今日电子书快照结束，耗时：775毫秒
2025-08-07 15:08:00.778 INFO  com.matt.wiki.job.DocJob                          :30   [32m608526740343623680[0;39m 更新电子书下的文档数据开始
2025-08-07 15:08:00.779 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608526740343623680[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 15:08:00.780 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608526740343623680[0;39m ==> Parameters: 
2025-08-07 15:08:01.589 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608526740343623680[0;39m <==    Updates: 4
2025-08-07 15:08:01.590 INFO  com.matt.wiki.job.DocJob                          :33   [32m608526740343623680[0;39m 更新电子书下的文档数据结束，耗时：812毫秒
2025-08-07 15:09:00.000 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608526988738695168[0;39m 生成今日电子书快照开始
2025-08-07 15:09:00.219 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608526988738695168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 15:09:00.220 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608526988738695168[0;39m ==> Parameters: 
2025-08-07 15:09:00.776 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608526988738695168[0;39m <==    Updates: 0
2025-08-07 15:09:00.777 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608526988738695168[0;39m 生成今日电子书快照结束，耗时：776毫秒
2025-08-07 15:09:00.778 INFO  com.matt.wiki.job.DocJob                          :30   [32m608526992001863680[0;39m 更新电子书下的文档数据开始
2025-08-07 15:09:00.779 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608526992001863680[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 15:09:00.779 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608526992001863680[0;39m ==> Parameters: 
2025-08-07 15:09:01.492 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608526992001863680[0;39m <==    Updates: 4
2025-08-07 15:09:01.493 INFO  com.matt.wiki.job.DocJob                          :33   [32m608526992001863680[0;39m 更新电子书下的文档数据结束，耗时：715毫秒
2025-08-07 15:10:00.002 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608527240405323776[0;39m 生成今日电子书快照开始
2025-08-07 15:10:00.229 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608527240405323776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 15:10:00.230 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608527240405323776[0;39m ==> Parameters: 
2025-08-07 15:10:00.926 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608527240405323776[0;39m <==    Updates: 0
2025-08-07 15:10:00.927 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608527240405323776[0;39m 生成今日电子书快照结束，耗时：925毫秒
2025-08-07 15:10:00.928 INFO  com.matt.wiki.job.DocJob                          :30   [32m608527244289249280[0;39m 更新电子书下的文档数据开始
2025-08-07 15:10:00.928 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608527244289249280[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 15:10:00.929 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608527244289249280[0;39m ==> Parameters: 
2025-08-07 15:10:01.406 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608527244289249280[0;39m <==    Updates: 4
2025-08-07 15:10:01.407 INFO  com.matt.wiki.job.DocJob                          :33   [32m608527244289249280[0;39m 更新电子书下的文档数据结束，耗时：479毫秒
2025-08-07 15:11:00.001 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608527492059369472[0;39m 生成今日电子书快照开始
2025-08-07 15:11:00.246 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608527492059369472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 15:11:00.247 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608527492059369472[0;39m ==> Parameters: 
2025-08-07 15:11:01.092 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608527492059369472[0;39m <==    Updates: 0
2025-08-07 15:11:01.093 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608527492059369472[0;39m 生成今日电子书快照结束，耗时：1092毫秒
2025-08-07 15:11:01.094 INFO  com.matt.wiki.job.DocJob                          :30   [32m608527496643743744[0;39m 更新电子书下的文档数据开始
2025-08-07 15:11:01.095 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608527496643743744[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 15:11:01.096 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608527496643743744[0;39m ==> Parameters: 
2025-08-07 15:11:02.116 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608527496643743744[0;39m <==    Updates: 4
2025-08-07 15:11:02.118 INFO  com.matt.wiki.job.DocJob                          :33   [32m608527496643743744[0;39m 更新电子书下的文档数据结束，耗时：1024毫秒
2025-08-07 15:12:00.001 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608527743717609472[0;39m 生成今日电子书快照开始
2025-08-07 15:12:00.380 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608527743717609472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 15:12:00.381 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608527743717609472[0;39m ==> Parameters: 
2025-08-07 15:12:00.917 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608527743717609472[0;39m <==    Updates: 0
2025-08-07 15:12:00.918 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608527743717609472[0;39m 生成今日电子书快照结束，耗时：916毫秒
2025-08-07 15:12:00.918 INFO  com.matt.wiki.job.DocJob                          :30   [32m608527747563786240[0;39m 更新电子书下的文档数据开始
2025-08-07 15:12:00.919 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608527747563786240[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 15:12:00.919 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608527747563786240[0;39m ==> Parameters: 
2025-08-07 15:12:01.617 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608527747563786240[0;39m <==    Updates: 4
2025-08-07 15:12:01.617 INFO  com.matt.wiki.job.DocJob                          :33   [32m608527747563786240[0;39m 更新电子书下的文档数据结束，耗时：698毫秒
2025-08-07 15:13:00.002 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608527995380043776[0;39m 生成今日电子书快照开始
2025-08-07 15:13:00.387 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608527995380043776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 15:13:00.388 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608527995380043776[0;39m ==> Parameters: 
2025-08-07 15:13:01.000 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608527995380043776[0;39m <==    Updates: 0
2025-08-07 15:13:01.000 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608527995380043776[0;39m 生成今日电子书快照结束，耗时：998毫秒
2025-08-07 15:13:01.001 INFO  com.matt.wiki.job.DocJob                          :30   [32m608527999570153472[0;39m 更新电子书下的文档数据开始
2025-08-07 15:13:01.001 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608527999570153472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 15:13:01.001 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608527999570153472[0;39m ==> Parameters: 
2025-08-07 15:13:01.614 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608527999570153472[0;39m <==    Updates: 4
2025-08-07 15:13:01.615 INFO  com.matt.wiki.job.DocJob                          :33   [32m608527999570153472[0;39m 更新电子书下的文档数据结束，耗时：614毫秒
2025-08-07 15:14:00.001 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608528247034089472[0;39m 生成今日电子书快照开始
2025-08-07 15:14:00.260 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608528247034089472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 15:14:00.262 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608528247034089472[0;39m ==> Parameters: 
2025-08-07 15:14:00.729 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608528247034089472[0;39m <==    Updates: 0
2025-08-07 15:14:00.730 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608528247034089472[0;39m 生成今日电子书快照结束，耗时：729毫秒
2025-08-07 15:14:00.730 INFO  com.matt.wiki.job.DocJob                          :30   [32m608528250091737088[0;39m 更新电子书下的文档数据开始
2025-08-07 15:14:00.731 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608528250091737088[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 15:14:00.732 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608528250091737088[0;39m ==> Parameters: 
2025-08-07 15:14:01.560 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608528250091737088[0;39m <==    Updates: 4
2025-08-07 15:14:01.561 INFO  com.matt.wiki.job.DocJob                          :33   [32m608528250091737088[0;39m 更新电子书下的文档数据结束，耗时：830毫秒
2025-08-07 15:15:00.001 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608528498692329472[0;39m 生成今日电子书快照开始
2025-08-07 15:15:00.225 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608528498692329472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 15:15:00.225 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608528498692329472[0;39m ==> Parameters: 
2025-08-07 15:15:00.722 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608528498692329472[0;39m <==    Updates: 0
2025-08-07 15:15:00.723 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608528498692329472[0;39m 生成今日电子书快照结束，耗时：722毫秒
2025-08-07 15:15:00.723 INFO  com.matt.wiki.job.DocJob                          :30   [32m608528501720616960[0;39m 更新电子书下的文档数据开始
2025-08-07 15:15:00.723 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608528501720616960[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 15:15:00.724 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608528501720616960[0;39m ==> Parameters: 
2025-08-07 15:15:01.420 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608528501720616960[0;39m <==    Updates: 4
2025-08-07 15:15:01.420 INFO  com.matt.wiki.job.DocJob                          :33   [32m608528501720616960[0;39m 更新电子书下的文档数据结束，耗时：697毫秒
2025-08-07 15:16:00.003 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608528750358958080[0;39m 生成今日电子书快照开始
2025-08-07 15:16:00.219 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608528750358958080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 15:16:00.220 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608528750358958080[0;39m ==> Parameters: 
2025-08-07 15:16:01.018 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608528750358958080[0;39m <==    Updates: 0
2025-08-07 15:16:01.019 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608528750358958080[0;39m 生成今日电子书快照结束，耗时：1016毫秒
2025-08-07 15:16:01.020 INFO  com.matt.wiki.job.DocJob                          :30   [32m608528754624565248[0;39m 更新电子书下的文档数据开始
2025-08-07 15:16:01.020 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608528754624565248[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 15:16:01.020 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608528754624565248[0;39m ==> Parameters: 
2025-08-07 15:16:01.527 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608528754624565248[0;39m <==    Updates: 4
2025-08-07 15:16:01.528 INFO  com.matt.wiki.job.DocJob                          :33   [32m608528754624565248[0;39m 更新电子书下的文档数据结束，耗时：508毫秒
2025-08-07 15:17:00.000 INFO  com.matt.wiki.job.EbookSnapshotJob                :31   [32m608529002004615168[0;39m 生成今日电子书快照开始
2025-08-07 15:17:00.509 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608529002004615168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2025-08-07 15:17:00.511 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608529002004615168[0;39m ==> Parameters: 
2025-08-07 15:17:01.124 DEBUG c.m.w.mapper.EbookSnapshotMapperCust.genSnapshot  :135  [32m608529002004615168[0;39m <==    Updates: 0
2025-08-07 15:17:01.124 INFO  com.matt.wiki.job.EbookSnapshotJob                :34   [32m608529002004615168[0;39m 生成今日电子书快照结束，耗时：1124毫秒
2025-08-07 15:17:01.125 INFO  com.matt.wiki.job.DocJob                          :30   [32m608529006723207168[0;39m 更新电子书下的文档数据开始
2025-08-07 15:17:01.126 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608529006723207168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2025-08-07 15:17:01.126 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608529006723207168[0;39m ==> Parameters: 
2025-08-07 15:17:01.738 DEBUG c.matt.wiki.mapper.DocMapperCust.updateEbookInfo  :135  [32m608529006723207168[0;39m <==    Updates: 4
2025-08-07 15:17:01.738 INFO  com.matt.wiki.job.DocJob                          :33   [32m608529006723207168[0;39m 更新电子书下的文档数据结束，耗时：613毫秒
2025-08-07 15:17:35.108 INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown     :54   [32m                  [0;39m Commencing graceful shutdown. Waiting for active requests to complete
2025-08-07 15:17:35.109 INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown     :76   [32m                  [0;39m Graceful shutdown complete
2025-08-07 15:17:35.111 INFO  com.zaxxer.hikari.HikariDataSource                :349  [32m                  [0;39m HikariPool-3 - Shutdown initiated...
2025-08-07 15:17:35.111 INFO  com.zaxxer.hikari.HikariDataSource                :351  [32m                  [0;39m HikariPool-3 - Shutdown completed.
